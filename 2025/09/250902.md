# TIL Next.js
## Next.js란
* React를 기반으로 하는 Full-Stack (Fronrend + Backend) 웹 애플리케이션 프레임워크

### React 기반
* React를 기반으로 하기 때문에 React를 사용할 줄 알면 배우기 어렵지 않음

* React에서 구현하기 어려웠던 서버 사이드 렌더링(SSR)을 더 쉽게 구현할 수 있음
    * Next.js는 Pre-rendering을 사용하기 때문에 SPA와 MPA를 모두 사용 가능

#### Pre-rendering을 사용하지 않는 경우(React 애플리케이션을 만들 때)
* 비어있는 html 파일을 불러와서 초기 렌더링을 한 다음, 자바스크립트 파일을 불러오고 나면 그 자바스크립트 파일을 사용해 돔을 조작하고 그렇게 화면을 완성

* 이게 프리렌더링을 사용하지 않는 리액트의 전통적인 방식

#### Pre-rendering을 사용하는 경우
1. 완전히 빈페이지를 보냈던 기존 리액트 애플리케이션과는 달리 어느정도 완성되어 있는 html 파일을 받아와서 초기 렌더링 함

2. 그리고 나서 추가적으로 자바스크립트 파일이 로드되면 자바스크립트로 필요한 조작을 함

3. 자바스크립트로 조작이 필요한 부분

    * 브라우저 주소창의 주소는 바뀌면서 페이지 전환은 일어나지 않는 SPA 방식의 페이지 라우팅을 할 수 있게 도와주는 라이브러리 사용

    * 이 라이브러리는 HTML을 바꿔서 페이지를 전환하는 방식이 아닌 브라우저의 히스토리 API기능을 사용하여 주소만 살짝 바꾸는 것이기 때문에 **페이지 전환 없이 라우팅**을 할 수 있게 도와줌

4. 브라우저는 클라이언트 쪽에서 사용할 수 있는 기능들
    * 그래서 자바스크립트 코드를 사용해야만 조작할 수 있는 기능이기도 함

    * 넥스트에도 링크 컴포넌트가 제공되고 있음

    * 이런 기능을 사용하거나 단순하게 onClick이나 onChange처럼 화면에 동작이 발생했을 때, 이벤트가 발생했을 때, 뭔가 처리를 해줘야 할 때에도 자바스크립트 코드를 사용해서 화면을 조작할 수 있음

    * 이런식으로 자바스크립트 코드가 필요한 부분은 HTML코드만으로는 완전히 구현할 수 없기 때문에 자바스크립트가 로드되기 전에는 이용할 수 없게 됨

#### Pre-rendering 장점
1. 빈화면을 보여주는 시간이 짧아짐

    * 자바스크립트로 조작이 되지 않더라도 일단은 어느정도 완성되어 있는 html 화면을 보여주기 때문

2. 추후 자바스크립트를 로드하고 나면 자바스크립트로 할 수 있는 조작도 가능해지기 때문에  
기존에 HTML 파일만 받아와서 MPA 방식으로 구현된 앱에서는 할 수 없었던 자바스크립트 조작 가능
    * 그래서 Next.js는 mpa방식과 spa 방식의 장점을 동시에 가지고 있음

### Pre-rendering 방식
1. 정적 페이지 생성(SSG, Static Site Generation)
    * 빌드할 때 html 생성 저장해뒀다가 재사용

    * HTML 파일에 대한 요청이 들어오면 그걸 바로 보내주게 됨

    * 빌드를 다시 하기 전까지는 내용이 변경되지 않음

2. 서버 사이드 렌더링 방식(SSR, Server Side Rendering)
    * 요청이 들어왔을 때 페이지를 생성해서 응답을 보냄

    * 그때그때 화면이 변경이 필요한 부분이 있을때마다 서버에서 페이지를 생성해서 보내줌

    * 화면에 변경이 필요하면서 서버에서 HTML을 가지고 오고 싶을 때 사용할 수 있는 방식

## Full-stack 
* Full-Stack (Fronrend + Backend) Next.js만으로 클라이언트 + 서버 개발 가능

    * 개발 환경을 통합하여 개발 속도가 향상됨

    * 클라이언트, 서버 따로 배포할 필요 없어짐

## 프레임 워크
* 웹 애플리케이션 프레임워크 Next.js에는 개발에 필요한 대부분의 기능이 갖춰져 있음

    * 개발 환경을 일일이 설정하거나, 필요한 라이브러리들을 따로 설치할 필요 없음

    * 정해진 사용법대로 잘 사용하면 좋은 성능의 애플리케이션 개발 가능

## Next.js 사용법
1. 12 Version
* 라우팅 방식: 페이지 라우팅

* Data Fetching:

    * getStaticProps : 자주 안바뀌는 데이터

    * getStaticPaths : 자주 안바뀌는 데이터 & 동적 라우트 필요

    * getServerSideProps : 자주 바뀌는 데이터

* 서버 작성 방법: index.js

* 레이아웃 작성 방법: _app.js

* 폴더의 작성 방법과 폴더 안의 파일 작성 방법 :
    1. Pages 안에는 index.js와 _app.js가 있음

    2. index.js가 특정 루트에서 어떤 페이지를 보여줄 것인지를 메인으로 표시해주는 파일

    3. _app.js는 모든 페이지에서 공통으로 보여줄 요소가 있을 때 작성

    4. Pages 안에서 posts라는 파일을 만들고 거기에 대괄호로 [id].js 파일을 만들어서 posts 뒤에 파라미터 /로 아이디 값을 받으면 여기서 화면을 보여주겠다는 의미가 됨

    5. Api는 분기처리가 아닌 서버를 만들기 위한 폴더

    6. 라우팅: app.js index.js

    7. 더 들어갈 내용: 폴더 생성하여 그 안에 작업하여 라우팅


2. 13 Version
* 라우팅 방식: 앱 라우팅

* Data Fetching:

    * Server Component

    * Client Component
    
* 서버 작성 방법: route.js

* 레이아웃 작성 방법: layout.js

* 폴더의 작성 방법과 폴더 안의 파일 작성 방법 :
    1. App/을 사용하여 라우팅

    2. Layout.js 사용하여 모든 페이지에 공통으로 보여줄 요소 작성

    3. Page.js는 특정 주소로 들어왔을 때 어떤 페이지를 보여주겠다라는 것을 표현하고 있는 이름

    4. Posts도 id 안에 page.js를 만들어서 표현

    5. Api도 hello를 만들고 그 안에 route.js를 만들어서 여기에서 요청을 받아서 처리
